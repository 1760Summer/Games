import{f as i,o as t,c as r,w as s,i as h,a as e,g as d,t as o,b as a,r as g,F as n,h as c,e as u}from"./index-huBs71Al.js";import{_ as l}from"./_plugin-vue_export-helper.BCo6x5W8.js";const f=l({data:()=>({grid:[],gridSize:4,score:0,gameOver:!1,touchStartX:0,touchStartY:0,touchEndX:0,touchEndY:0,slide:""}),onLoad(){this.init()},created(){},methods:{handleTouchStart(i){this.touchStartX=i.touches[0].clientX,this.touchStartY=i.touches[0].clientY},handleTouchEnd(i){i.preventDefault(),this.touchEndX=i.changedTouches[0].clientX,this.touchEndY=i.changedTouches[0].clientY;const t=this.touchEndX-this.touchStartX,r=this.touchEndY-this.touchStartY;Math.abs(t)>Math.abs(r)?t>0?this.MoveRight():this.MoveLeft():r>0?this.MoveDown():this.MoveUp()},init(){this.grid=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.FindZeroAndSetTwoOrFour(),this.FindZeroAndSetTwoOrFour()},FindZeroAndSetTwoOrFour(){for(var i=[],t=0;t<this.gridSize;t++)for(var r=0;r<this.gridSize;r++)0===this.grid[t][r]&&i.push({x:t,y:r});if(i.length>0){var{x:s,y:h}=i[Math.floor(Math.random()*i.length)];this.grid[s][h]=Math.random()<.9?2:4}},async MoveUp(){for(var i=!1,t=0;t<this.gridSize;t++)for(var r=1;r<this.gridSize;r++)if(0!==this.grid[r][t]){for(var s=r-1;s>=0&&0===this.grid[s][t];)s--;s>=0&&this.grid[s][t]===this.grid[r][t]?(this.grid[s][t]*=2,this.score+=this.grid[s][t],this.grid[r][t]=0,i=!0):s+1!==r&&(this.grid[s+1][t]=this.grid[r][t],this.grid[r][t]=0,i=!0)}i&&(this.FindZeroAndSetTwoOrFour(),this.GameOver())},async MoveDown(){for(var i=!1,t=0;t<this.gridSize;t++)for(var r=this.gridSize-2;r>=0;r--)if(0!==this.grid[r][t]){for(var s=r+1;s<this.gridSize&&0===this.grid[s][t];)s++;s<this.gridSize&&this.grid[s][t]===this.grid[r][t]?(this.grid[s][t]*=2,this.score+=this.grid[s][t],this.grid[r][t]=0,i=!0):s-1!==r&&(this.grid[s-1][t]=this.grid[r][t],this.grid[r][t]=0,i=!0)}i&&(this.FindZeroAndSetTwoOrFour(),this.GameOver())},async MoveLeft(){for(var i=!1,t=0;t<this.gridSize;t++)for(var r=1;r<this.gridSize;r++)if(0!==this.grid[t][r]){for(var s=r-1;s>=0&&0===this.grid[t][s];)s--;s>=0&&this.grid[t][s]===this.grid[t][r]?(this.grid[t][s]*=2,this.score+=this.grid[t][s],this.grid[t][r]=0,i=!0):s+1!==r&&(this.grid[t][s+1]=this.grid[t][r],this.grid[t][r]=0,i=!0)}i&&(this.FindZeroAndSetTwoOrFour(),this.GameOver())},async MoveRight(){for(var i=!1,t=0;t<this.gridSize;t++)for(var r=this.gridSize-2;r>=0;r--)if(0!==this.grid[t][r]){for(var s=r+1;s<this.gridSize&&0===this.grid[t][s];)s++;s<this.gridSize&&this.grid[t][s]===this.grid[t][r]?(this.grid[t][s]*=2,this.score+=this.grid[t][s],this.grid[t][r]=0,i=!0):s-1!==r&&(this.grid[t][s-1]=this.grid[t][r],this.grid[t][r]=0,i=!0)}i&&(this.FindZeroAndSetTwoOrFour(),this.GameOver())},GameOver(){this.gameOver=!0;for(var t=0;t<this.gridSize;t++)for(var r=0;r<this.gridSize;r++)(0===this.grid[t][r]||t<this.gridSize-1&&this.grid[t][r]===this.grid[t+1][r]||r<this.gridSize-1&&this.grid[t][r]===this.grid[t][r+1])&&(this.gameOver=!1);this.gameOver&&i({content:"游戏结束！\n您的得分为"+this.score,showCancel:!1})}}},[["render",function(i,l,f,v,S,z){const T=h;return t(),r(T,{class:"grid-container"},{default:s((()=>[e(T,{style:{display:"flex","justify-content":"space-between"}},{default:s((()=>[d("span",null,"分数："+o(S.score),1),d("span",{onClick:l[0]||(l[0]=(...i)=>z.init&&z.init(...i))},"重新开始")])),_:1}),(t(!0),a(n,null,g(S.grid,((i,h)=>(t(),r(T,{key:h,class:"grid-row"},{default:s((()=>[(t(!0),a(n,null,g(i,((i,h)=>(t(),r(T,{key:h,class:c(["grid-cell","grid-cell-"+i]),onTouchstart:z.handleTouchStart,onTouchend:z.handleTouchEnd},{default:s((()=>[u(o(0!==i?i:""),1)])),_:2},1032,["class","onTouchstart","onTouchend"])))),128))])),_:2},1024)))),128))])),_:1})}],["__scopeId","data-v-c5fc12af"]]);export{f as default};
